webpackJsonp([5],{227:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(278),r=s(247),o=s(80),i=Object(o.a)(r.a,a.a,a.b,!1,null,null,null);i.options.__file="src\\components\\order\\order.vue",e.default=i.exports},247:function(t,e,s){"use strict";var a=s(248);e.a=a.a},248:function(t,e,s){"use strict";var a=s(82),r=s.n(a),o=s(81);e.a={components:{VDistpicker:r.a},created:function(){this.getGoodsListData()},data:function(){return{totalCount:0,goodslist:[],radio:"1",orderInfo:{accept_name:"赵坚强",address:"中粮商务公园3栋1304",mobile:"13812345678",email:"huangwei@itcast.cn",post_code:"518000",area:{province:{code:"440000",value:"广东省"},city:{code:"440300",value:"深圳市"},area:{code:"440306",value:"宝安区"}},payment_id:"6",express_id:"1",expressMoment:20,message:"请快点发货",goodsAmount:0,goodsids:"",cargoodsobj:{}},rules:{accept_name:[{required:!0,message:"名字不能为空",trigger:"blur"}],area:[{required:!0,message:"所属区域不能为空",trigger:"blur"}],address:[{required:!0,message:"详细地址不能为空",trigger:"blur"}],mobile:[{required:!0,validator:function(t,e,s){if(""===e)s(new Error("请输入手机号"));else{/^1(3[0-9]|5[189]|8[6789])[0-9]{8}$/.test(e)||s(new Error("非合法手机号")),s()}},trigger:"blur"}]}}},computed:{getsum:function(){return this.orderInfo.expressMoment+this.orderInfo.goodsAmount}},methods:{onSelected:function(t){this.orderInfo.area=t},switchExpress:function(t){switch(t){case"1":this.orderInfo.expressMoment=20;break;case"2":this.orderInfo.expressMoment=10;break;case"3":this.orderInfo.expressMoment=8}},getGoodsListData:function(){var t=this,e=this.$route.params.ids;this.orderInfo.goodsids=e;var s={},a=Object(o.c)(),r=e.split(",");for(var i in a)r.includes(i)&&(s[i]=a[i]);this.orderInfo.cargoodsobj=s;var n="site/validate/order/getgoodslist/"+e;this.axios.get(n).then(function(e){var s=0,r=0;e.data.message.forEach(function(t){t.buycount=a[t.id],s+=t.buycount,r+=t.sell_price*t.buycount}),t.goodslist=e.data.message,t.totalCount=s,t.orderInfo.goodsAmount=r})},goToOrder:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(e){t.axios.post("site/validate/order/setorder",t.orderInfo).then(function(e){1==e.data.status&&t.$messahe.error("订单提交失败"),t.$route.params.ids.split(",").forEach(function(e){t.$store.commit("deleteGoodsById",e)}),t.$router.push({path:"/site/payOrder/"+e.data.message.orderid})})}else t.$message.warning("请完善信息，再下单！")})}}}},278:function(t,e,s){"use strict";var a=s(279);s.d(e,"a",function(){return a.a}),s.d(e,"b",function(){return a.b})},279:function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"section"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"bg-wrap"},[t._m(1),t._v(" "),s("div",{staticClass:"cart-box"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.orderInfo,rules:t.rules,"label-width":"120px",label:"right","status-icon":""}},[s("h2",{staticClass:"slide-tit"},[s("span",[t._v("1、收货地址")])]),t._v(" "),s("div",{staticClass:"form-box address-info"},[s("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"收货人姓名",prop:"accept_name"}},[s("el-input",{model:{value:t.orderInfo.accept_name,callback:function(e){t.$set(t.orderInfo,"accept_name",e)},expression:"orderInfo.accept_name"}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"所属地区",prop:"area"}},[s("v-distpicker",{attrs:{province:t.orderInfo.area.province.value,city:t.orderInfo.area.city.value,area:t.orderInfo.area.area.value},on:{selected:t.onSelected}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"详细地址",prop:"address"}},[s("el-input",{model:{value:t.orderInfo.address,callback:function(e){t.$set(t.orderInfo,"address",e)},expression:"orderInfo.address"}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"手机号码",prop:"mobile"}},[s("el-input",{model:{value:t.orderInfo.mobile,callback:function(e){t.$set(t.orderInfo,"mobile",e)},expression:"orderInfo.mobile"}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"电子邮箱"}},[s("el-input",{model:{value:t.orderInfo.email,callback:function(e){t.$set(t.orderInfo,"email",e)},expression:"orderInfo.email"}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"1000px"},attrs:{label:"邮政编码"}},[s("el-input",{model:{value:t.orderInfo.post_code,callback:function(e){t.$set(t.orderInfo,"post_code",e)},expression:"orderInfo.post_code"}})],1)],1),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("2、支付方式")])]),t._v(" "),s("ul",{staticClass:"item-box clearfix"},[s("li",[s("label",[s("el-radio",{attrs:{label:"6"},model:{value:t.orderInfo.payment_id,callback:function(e){t.$set(t.orderInfo,"payment_id",e)},expression:"orderInfo.payment_id"}},[t._v("在线支付")]),t._v(" "),s("em",[t._v("手续费：0.00元")])],1)])]),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("3、配送方式")])]),t._v(" "),s("ul",{staticClass:"item-box clearfix"},[s("li",[s("el-radio-group",{on:{change:t.switchExpress},model:{value:t.orderInfo.express_id,callback:function(e){t.$set(t.orderInfo,"express_id",e)},expression:"orderInfo.express_id"}},[s("el-radio",{attrs:{label:"1"}},[t._v("顺丰 "),s("em",[t._v("费用：20.00元")])]),t._v(" "),s("el-radio",{attrs:{label:"2"}},[t._v("圆通 "),s("em",[t._v("费用：10.00元")])]),t._v(" "),s("el-radio",{attrs:{label:"3"}},[t._v("韵达 "),s("em",[t._v("费用：8.00元")])])],1)],1)]),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("4、商品清单")])]),t._v(" "),s("div",{staticClass:"line15"}),t._v(" "),s("table",{staticClass:"cart-table",attrs:{width:"100%",border:"0",align:"center",cellpadding:"8",cellspacing:"0"}},[s("tbody",[s("tr",[s("th",{attrs:{colspan:"2",align:"left"}},[t._v("商品信息")]),t._v(" "),s("th",{attrs:{width:"84",align:"left"}},[t._v("单价")]),t._v(" "),s("th",{attrs:{width:"84",align:"center"}},[t._v("购买数量")]),t._v(" "),s("th",{attrs:{width:"104",align:"left"}},[t._v("金额(元)")])]),t._v(" "),t._l(t.goodslist,function(e){return s("tr",{key:e.id},[s("td",{attrs:{width:"68"}},[s("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[s("img",{staticClass:"img",attrs:{src:e.img_url}})])]),t._v(" "),s("td",[s("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[t._v(t._s(e.title))])]),t._v(" "),s("td",[s("span",{staticClass:"red"},[t._v("\n                                                ￥"+t._s(e.sell_price)+"\n                                            ")])]),t._v(" "),s("td",{attrs:{align:"center"}},[t._v(t._s(e.buycount))]),t._v(" "),s("td",[s("span",{staticClass:"red"},[t._v("\n                                                ￥"+t._s(e.sell_price*e.buycount)+"\n                                            ")])])])})],2)]),t._v(" "),s("div",{staticClass:"line15"}),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("5、结算信息")])]),t._v(" "),s("div",{staticClass:"buy-foot clearfix"},[s("div",{staticClass:"left-box"},[s("dl",[s("dt",[t._v("订单备注(100字符以内)")]),t._v(" "),s("dd",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderInfo.message,expression:"orderInfo.message"}],staticClass:"input",staticStyle:{height:"35px"},attrs:{name:"message"},domProps:{value:t.orderInfo.message},on:{input:function(e){e.target.composing||t.$set(t.orderInfo,"message",e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"right-box"},[s("p",[t._v("\n                                        商品\n                                        "),s("label",{staticClass:"price"},[t._v(t._s(t.totalCount))]),t._v(" 件     商品金额：￥\n                                        "),s("label",{staticClass:"price",attrs:{id:"goodsAmount"}},[t._v(t._s(t.orderInfo.goodsAmount))]),t._v(" 元    \n                                    ")]),t._v(" "),s("p",[t._v("\n                                        运费：￥\n                                        "),s("label",{staticClass:"price",attrs:{id:"expressFee"}},[t._v(t._s(t.orderInfo.expressMoment))]),t._v(" 元\n                                    ")]),t._v(" "),s("p",{staticClass:"txt-box"},[t._v("\n                                        应付总金额：￥\n                                        "),s("label",{staticClass:"price",attrs:{id:"totalAmount"}},[t._v(t._s(t.getsum))])]),t._v(" "),s("p",{staticClass:"btn-box"},[s("a",{staticClass:"btn button",attrs:{href:"/cart.html"}},[t._v("返回购物车")]),t._v(" "),s("a",{staticClass:"btn submit",attrs:{id:"btnSubmit"},on:{click:t.goToOrder}},[t._v("确认提交")])])])])])],1)])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("div",{staticClass:"location"},[s("span",[t._v("当前位置：")]),t._v(" "),s("a",{attrs:{href:"/index.html"}},[t._v("首页")]),t._v(" >\n                "),s("a",{attrs:{href:"/cart.html"}},[t._v("购物车")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart-head clearfix"},[s("h2",[s("i",{staticClass:"iconfont icon-cart"}),t._v("我的购物车")]),t._v(" "),s("div",{staticClass:"cart-setp"},[s("ul",[s("li",{staticClass:"first active"},[s("div",{staticClass:"progress"},[s("span",[t._v("1")]),t._v("\n                                    放进购物车\n                                ")])]),t._v(" "),s("li",{staticClass:"active"},[s("div",{staticClass:"progress"},[s("span",[t._v("2")]),t._v("\n                                    填写订单信息\n                                ")])]),t._v(" "),s("li",{staticClass:"last"},[s("div",{staticClass:"progress"},[s("span",[t._v("3")]),t._v("\n                                    支付/确认订单\n                                ")])])])])])}];a._withStripped=!0}});